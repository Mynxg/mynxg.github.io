import{_ as l}from"./plugin-vue_export-helper-c27b6911.js";import{r as i,o as r,c as o,b as n,d as s,a as e,f as t}from"./app-3b64d3fc.js";const p="/assets/2023-04-20_19-56-47-03d16be2.png",c="/assets/2023-04-20_20-59-45-55201b19.png",d="/assets/2023-04-20_19-14-24-5590fa40.png",u="/assets/2023-04-20_19-24-00-66334bd0.png",m="/assets/2023-04-20_20-39-41-6a258bb9.png",v="/assets/2023-04-20_19-44-08-e00b26ea.png",b="/assets/2023-04-20_19-47-34-10116bf9.png",h="/assets/2023-04-20_20-00-06-ff838507.png",k="/assets/2023-04-20_20-00-58-fd2b2d94.png",_="/assets/2023-04-20_20-06-06-305709d5.png",f="/assets/2023-04-20_20-08-23-996fde90.png",g={},y=n("blockquote",null,[n("p",null,"Frp 是一个高性能的反向代理应用程序，它可以帮助您轻松地管理内网中的服务，并且可以将这些服务暴露给公网。Frp 的主要作用是实现内网穿透，使外网用户能够访问内网中的服务。下面是一些 Frp 的应用场景："),n("ol",null,[n("li",null,"内网穿透：通过 Frp，您可以将内网中的服务暴露到公网上，例如 Web 服务器、FTP 服务器、SSH 服务器等。"),n("li",null,"内网远程桌面：Frp 可以让您在外网使用远程桌面连接到内网中的计算机，方便远程管理和维护。"),n("li",null,"构建云计算平台：Frp 可以帮助企业构建私有云环境，提供虚拟机、存储和计算资源等服务。"),n("li",null,[s("网络监控：Frp 可以用于搭建网络监控系统，通过端口转发将监控服务暴露到公网上，方便管理员远程查看。"),n("br"),s(" 总之，Frp 是一款十分实用的工具，可以帮助企业和个人轻松地管理和访问内网中的服务。")])])],-1),x={href:"https://github.com/fatedier/frp/releases/tag/v0.48.0",target:"_blank",rel:"noopener noreferrer"},q=n("br",null,null,-1),w={href:"https://gofrp.org/docs/setup/systemd/",target:"_blank",rel:"noopener noreferrer"},z=t('<h2 id="一、背景" tabindex="-1"><a class="header-anchor" href="#一、背景" aria-hidden="true">#</a> 一、背景</h2><p>使用todesk个人版(免费)连接远程桌面（win10、win11），在网络环境比较差的情况下，使用起来很不友好，于是就想使用frp这个工具了。</p><h2 id="二、前提" tabindex="-1"><a class="header-anchor" href="#二、前提" aria-hidden="true">#</a> 二、前提</h2><p>服务器需要开放安全组规则</p><blockquote><p>例如以我的阿里云服务器为例</p></blockquote><p><img src="'+p+'" alt="" loading="lazy"><br> 具体如何配置请参考：</p><h3 id="frp实现思路" tabindex="-1"><a class="header-anchor" href="#frp实现思路" aria-hidden="true">#</a> frp实现思路：</h3><p>首先先明确服务端和客户端是什么？</p><blockquote><p>FRP 中服务端（Server）和客户端（Client）是指 FRP 这个工具的两个不同角色。<br> 服务端是 FRP 的远程服务器，它运行在公网上，并且通常被用来提供内网穿透功能。当您需要从外部网络访问内部网络的设备时，可以在公网上部署一个 FRP 服务端，通过配置相应的映射规则，将来自公网的请求转发到内网设备上。<br> 客户端是 FRP 工具的本地组件，它运行在需要被访问的内部网络设备上，并与远程服务端建立连接。客户端会向服务端注册自己的身份信息，并定期向服务端发送心跳包以保持连接。一旦客户端成功连接到服务端，外部网络就可以通过服务端访问客户端所在的内部网络设备。</p></blockquote><figure><img src="'+c+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="三、环境安装" tabindex="-1"><a class="header-anchor" href="#三、环境安装" aria-hidden="true">#</a> 三、环境安装</h2><blockquote><p>在 Linux 系统下使用 systemd 控制 frps 及配置开机自启</p></blockquote><p>这里以Linux服务器（centos）为例，</p><h3 id="_2-1-安装-systemd" tabindex="-1"><a class="header-anchor" href="#_2-1-安装-systemd" aria-hidden="true">#</a> 2.1 安装 <code>systemd</code></h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> systemd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-2-创建并编辑-frps-service-文件-使用vim编辑器" tabindex="-1"><a class="header-anchor" href="#_2-2-创建并编辑-frps-service-文件-使用vim编辑器" aria-hidden="true">#</a> 2.2 创建并编辑 <code>frps.service</code> 文件（使用vim编辑器）</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /etc/systemd/system/frps.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-3-写入内容" tabindex="-1"><a class="header-anchor" href="#_2-3-写入内容" aria-hidden="true">#</a> 2.3 写入内容</h3><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span>
<span class="token comment"># 服务名称，可自定义</span>
<span class="token key attr-name">Description</span> <span class="token punctuation">=</span> <span class="token value attr-value">frp server</span>
<span class="token key attr-name">After</span> <span class="token punctuation">=</span> <span class="token value attr-value">network.target syslog.target</span>
<span class="token key attr-name">Wants</span> <span class="token punctuation">=</span> <span class="token value attr-value">network.target</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Service</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Type</span> <span class="token punctuation">=</span> <span class="token value attr-value">simple</span>
<span class="token comment"># 启动frps的命令，需修改为您的frps的安装路径</span>
<span class="token comment"># 例如我解压后的frp安装包在此路径下 /root/frp/frps</span>
<span class="token comment"># ExecStart = /root/frp/frps/frps -c /root/frp/frps/frps.ini</span>
<span class="token key attr-name">ExecStart</span> <span class="token punctuation">=</span> <span class="token value attr-value">/path/to/frps -c /path/to/frps.ini</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Install</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">WantedBy</span> <span class="token punctuation">=</span> <span class="token value attr-value">multi-user.target</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,19),F=n("br",null,null,-1),P=n("img",{src:d,alt:"",loading:"lazy"},null,-1),R=n("br",null,null,-1),S={href:"https://gofrp.org/docs/setup/systemd/",target:"_blank",rel:"noopener noreferrer"},L=t(`<h3 id="_2-4-下载解压安装包" tabindex="-1"><a class="header-anchor" href="#_2-4-下载解压安装包" aria-hidden="true">#</a> 2.4 下载解压安装包</h3><p>方式一：<br> 在已经创建好的 /root/frp目录下，执行下面的命令即可下frp安装包：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">wget</span> https://github.com/fatedier/frp/releases/download/v0.48.0/frp_0.48.0_linux_arm64.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),E=n("br",null,null,-1),T={href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"},B=n("br",null,null,-1),D=n("br",null,null,-1),I=n("img",{src:u,alt:"",loading:"lazy"},null,-1),N=t(`<p>将frp的linux包传递Linux服务器的自定义目录下</p><blockquote><p>例如：<br> 放在/root/frp/目录（文件夹）下，然后解压此文件<strong>frp_0.48.0_linux_amd64.tar.gz</strong></p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> frp_0.48.0_linux_amd64.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后对其命名：<br> mv 原文件名 修改后的文件名</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mv</span> frp_0.48.0_linux_amd64 frps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>或者直接解压并重新命名</p><h3 id="_2-5-配置服务端-服务器" tabindex="-1"><a class="header-anchor" href="#_2-5-配置服务端-服务器" aria-hidden="true">#</a> 2.5 配置服务端（服务器）</h3><p>在解压frp安装包后的文件夹下对文件进行配置：</p><blockquote><p>例如：frp解压在/root/frp/frps/目录下</p></blockquote><p>对frps.ini文件进行配置</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> frps.ini
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输入内容：</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">common</span><span class="token punctuation">]</span></span>
<span class="token comment"># 服务端端口</span>
<span class="token key attr-name">bind_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">7000</span>
<span class="token key attr-name">binf_addr</span> <span class="token punctuation">=</span> <span class="token value attr-value">0.0.0.0</span>
<span class="token key attr-name">bind_udp_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">7000</span>

<span class="token key attr-name">authentication_method</span> <span class="token punctuation">=</span> <span class="token value attr-value">token</span>
<span class="token comment"># 认证Token的值包含字母大小写数字等</span>
<span class="token key attr-name">token</span> <span class="token punctuation">=</span> <span class="token value attr-value">自定义token</span>

<span class="token comment"># 可视化面板</span>
<span class="token key attr-name">dashboard_user</span> <span class="token punctuation">=</span> <span class="token value attr-value">admin</span>
<span class="token comment"># Dashboard密码</span>
<span class="token key attr-name">dashboard_pwd</span> <span class="token punctuation">=</span> <span class="token value attr-value">123456</span>
<span class="token key attr-name">dashboard_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">7500</span> 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>保存配置并退出 <em>:wq</em></p><p>使用 <code>systemd</code> 命令，管理 frps</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 启动frp</span>
systemctl start frps
<span class="token comment"># 停止frp</span>
systemctl stop frps
<span class="token comment"># 重启frp</span>
systemctl restart frps
<span class="token comment"># 查看frp状态</span>
systemctl status frps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置 frps 开机自启:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> frps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>贴一张可视化面板图：<br><img src="`+m+'" alt="" loading="lazy"></p><h3 id="_2-6-配置客户端frp" tabindex="-1"><a class="header-anchor" href="#_2-6-配置客户端frp" aria-hidden="true">#</a> 2.6 配置客户端frp</h3>',20),V={href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"},C=t('<p><img src="'+v+'" alt="" loading="lazy"><br> 自定义一个文件夹解压</p><h3 id="_2-6-配置客户端-win10本机" tabindex="-1"><a class="header-anchor" href="#_2-6-配置客户端-win10本机" aria-hidden="true">#</a> 2.6 配置客户端（win10本机）</h3><p>在解压frp安装包后，进入找到frpc.ini配置文件并使用文本编辑器打开<br><img src="'+b+`" alt="" loading="lazy"><br> 配置如下：</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token comment"># 全局配置</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">common</span><span class="token punctuation">]</span></span>
<span class="token comment"># 服务端公网ip</span>
<span class="token key attr-name">server_addr</span> <span class="token punctuation">=</span> <span class="token value attr-value">你的服务端公网ip地址，自行修改</span>
<span class="token comment"># 服务端端口</span>
<span class="token key attr-name">server_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">7000</span>

<span class="token key attr-name">authentication_method</span> <span class="token punctuation">=</span> <span class="token value attr-value">token</span>
<span class="token key attr-name">token</span> <span class="token punctuation">=</span> <span class="token value attr-value">自定义token</span>

<span class="token comment"># 反向代理的名称，可以随意设置</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">RDP</span><span class="token punctuation">]</span></span> 
<span class="token comment"># RDP 是 TCP 协议的</span>
<span class="token key attr-name">type</span> <span class="token punctuation">=</span> <span class="token value attr-value">tcp</span>
<span class="token comment"># 本机 IP</span>
<span class="token key attr-name">local_ip</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1</span>
<span class="token comment"># 远程桌面的默认端口</span>
<span class="token key attr-name">local_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">3389</span>
<span class="token comment"># 外网访问的端口</span>
<span class="token key attr-name">remote_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">7001</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),W=n("br",null,null,-1),A={href:"https://cloud.tencent.com/developer/article/1710141",target:"_blank",rel:"noopener noreferrer"},H=t('<p>在目录下输入cmd回车，然后运行frpc.exe<br> 如图所示：<br><img src="'+h+'" alt="" loading="lazy"><br><img src="'+k+'" alt="" loading="lazy"><br> 就此配置完成</p><p>接下来就连接远程桌面了</p><h3 id="_2-7-连接远程桌面" tabindex="-1"><a class="header-anchor" href="#_2-7-连接远程桌面" aria-hidden="true">#</a> 2.7 连接远程桌面</h3><p>如下图所示：<br> 计算机为你服务端的ip地址加端口</p><blockquote><p>例如：139.224.12.12:7000<br><img src="'+_+'" alt="" loading="lazy"></p></blockquote><p>由于我电脑使用的微软邮箱，用户名就为 <a href="mailto:123@outlook.com">123@outlook.com</a>，密码对应微软邮箱密码<br><img src="'+f+'" alt="" loading="lazy"><br> 如果你使用的是本地账号登录，那用户名就是你本地的那个用户名，密码就是开机密码。</p><blockquote><p>如果不想使用ip地址，可以将ip地址绑到域名上，或不想输入端口，可以进行反向代理</p></blockquote><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>总之，frp不仅仅只是玩远程桌面，还可以玩内网穿透、渗透等。</p><h2 id="附件" tabindex="-1"><a class="header-anchor" href="#附件" aria-hidden="true">#</a> 附件</h2>',10),U={href:"https://cloud.tencent.com/developer/article/1710141",target:"_blank",rel:"noopener noreferrer"},j=n("br",null,null,-1),G={href:"https://www.cnblogs.com/zhanggaoxing/p/9221705.html",target:"_blank",rel:"noopener noreferrer"},J=n("br",null,null,-1),K={href:"https://account.aliyun.com/login/login.htm",target:"_blank",rel:"noopener noreferrer"};function M(O,Q){const a=i("ExternalLinkIcon");return r(),o("div",null,[y,n("blockquote",null,[n("p",null,[s("官网："),n("a",x,[s("https://github.com/fatedier/frp/releases/tag/v0.48.0"),e(a)]),q,s(" 官方文档："),n("a",w,[s("https://gofrp.org/docs/setup/systemd/"),e(a)])])]),z,n("p",null,[s("如下图："),F,P,R,s(" 上面三步可以参考："),n("a",S,[s("https://gofrp.org/docs/setup/systemd/"),e(a)])]),L,n("p",null,[s("方式二："),E,s(" 下载地址："),n("a",T,[s("https://github.com/fatedier/frp/releases"),e(a)]),B,s(" Linux版（centos），下载如下图版本："),D,I]),N,n("blockquote",null,[n("p",null,[s("下载地址："),n("a",V,[s("https://github.com/fatedier/frp/releases"),e(a)])])]),C,n("blockquote",null,[n("p",null,[s("注意：服务端的配置的token与客户端配置的token需要保持一致。"),W,s(" 参考："),n("a",A,[s("https://cloud.tencent.com/developer/article/1710141"),e(a)])])]),H,n("p",null,[s("参考1："),n("a",U,[s("https://cloud.tencent.com/developer/article/1710141"),e(a)]),j,s(" 参考2："),n("a",G,[s("https://www.cnblogs.com/zhanggaoxing/p/9221705.html"),e(a)]),J,s(" 阿里云官方地址："),n("a",K,[s("https://account.aliyun.com/login/login.htm"),e(a)])])])}const Z=l(g,[["render",M],["__file","frp实现远程桌面连接.html.vue"]]);export{Z as default};
