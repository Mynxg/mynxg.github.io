import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,e as a,o as t}from"./app-BbNuU-RO.js";const l={};function n(r,e){return t(),s("div",null,e[0]||(e[0]=[a(`<p>背景： 在Oracle数据库中，通过查询 A表所有数据，发现某个字段出现字符问题</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM  A</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="一、遇到的问题" tabindex="-1"><a class="header-anchor" href="#一、遇到的问题"><span>一、遇到的问题</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>ORA-29275: 部分多字节字符</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>排查过程：</p><p>1.先定位到哪条数据有问题，这可以通过二分查找方式缩小查询范围</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> A  </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rownum </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 12</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>2.拿出A所有的字段，进行查询，同样通过二分查找的方式缩小查询范围</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> q,w,e,r... </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> A</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>3.最终定位到 A表中的 w字段有问题</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> w </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> A</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>显示如下错误：ORA-29275: 部分多字节字符</p><p>原因分析：</p><blockquote><p>可能某个字段中有半个中文字符则会报这个异常，原因为Oracle编码问题。</p></blockquote><h2 id="二、解决方法" tabindex="-1"><a class="header-anchor" href="#二、解决方法"><span>二、解决方法：</span></a></h2><p>方法1： 在有问题的字段上面加上 to_nchar(字段)</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  TO_NCHAR(w) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> A</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 或者</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> TO_SINGLE_BYTE(w) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  A</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>方法2：</p><blockquote><p>改数据库字符集</p><p>检查他们Oracle的nls_lang环境变量，发现他们客户端的nls_lang设置为 american.</p><p>改成export NLS_LANG=AMERICAN_AMERICA.ZHS16CGB231280后， 就正常了。</p></blockquote><p>方法3：</p><blockquote><p>在oracle中字段中找出汉字的方法：可以利用length(testname)和lengthb(testname)，其中length(testname)不论数字或者字符都算一个，</p><p>而lengthb则不同，比如说testname的值为：54看法12，用length(testname)的值为6，而lengthb(testname)的值为：8。</p><p>利用这个就可以非常清楚的判断一个字符中是否包含汉字了(字母除外)。 to_single_byte(c)转换成半角</p><p>to_multi_byte(c)转换成全角</p></blockquote><h2 id="三、附件" tabindex="-1"><a class="header-anchor" href="#三、附件"><span>三、附件</span></a></h2><p>参考： <a href="https://blog.csdn.net/zhangzhongzhong/article/details/78722105" target="_blank" rel="noopener noreferrer">ORA-29275部分多字节字符处理</a></p><p><a href="https://blog.csdn.net/keueng/article/details/48808085" target="_blank" rel="noopener noreferrer">ORA-29275:部分多字节字符</a></p><p><a href="https://www.cnblogs.com/huaji666/p/8489592.html" target="_blank" rel="noopener noreferrer"> Oracle数据库报错: ORA-29275:部分多字节字符</a></p><p><a href="https://blog.csdn.net/blood_Z/article/details/123524415" target="_blank" rel="noopener noreferrer">Oracle分页查询</a></p>`,26)]))}const d=i(l,[["render",n],["__file","Oracle之ORA-29275-部分多字节字符.html.vue"]]),o=JSON.parse('{"path":"/questionskills/workquestions/Oracle%E4%B9%8BORA-29275-%E9%83%A8%E5%88%86%E5%A4%9A%E5%AD%97%E8%8A%82%E5%AD%97%E7%AC%A6.html","title":"Oracle之ORA-29275-部分多字节字符","lang":"zh-CN","frontmatter":{"title":"Oracle之ORA-29275-部分多字节字符","icon":"sliders","category":["数据库"],"tag":["oracle"],"sticky":false,"star":false,"article":true,"timeline":true,"date":"2023-12-02T09:14:17.000Z","description":"背景： 在Oracle数据库中，通过查询 A表所有数据，发现某个字段出现字符问题 一、遇到的问题 排查过程： 1.先定位到哪条数据有问题，这可以通过二分查找方式缩小查询范围 2.拿出A所有的字段，进行查询，同样通过二分查找的方式缩小查询范围 3.最终定位到 A表中的 w字段有问题 显示如下错误：ORA-29275: 部分多字节字符 原因分析： 可能某个...","gitInclude":[],"head":[["link",{"rel":"canonical","href":"https://blogs.lxip.top/questionskills/workquestions/Oracle%E4%B9%8BORA-29275-%E9%83%A8%E5%88%86%E5%A4%9A%E5%AD%97%E8%8A%82%E5%AD%97%E7%AC%A6.html"}],["meta",{"property":"og:url","content":"https://blog.lxip.top/questionskills/workquestions/Oracle%E4%B9%8BORA-29275-%E9%83%A8%E5%88%86%E5%A4%9A%E5%AD%97%E8%8A%82%E5%AD%97%E7%AC%A6.html"}],["meta",{"property":"og:site_name","content":"所遇所思"}],["meta",{"property":"og:title","content":"Oracle之ORA-29275-部分多字节字符"}],["meta",{"property":"og:description","content":"背景： 在Oracle数据库中，通过查询 A表所有数据，发现某个字段出现字符问题 一、遇到的问题 排查过程： 1.先定位到哪条数据有问题，这可以通过二分查找方式缩小查询范围 2.拿出A所有的字段，进行查询，同样通过二分查找的方式缩小查询范围 3.最终定位到 A表中的 w字段有问题 显示如下错误：ORA-29275: 部分多字节字符 原因分析： 可能某个..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:tag","content":"oracle"}],["meta",{"property":"article:published_time","content":"2023-12-02T09:14:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Oracle之ORA-29275-部分多字节字符\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-12-02T09:14:17.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.keney\\",\\"url\\":\\"https://github.com/mynxg\\"}]}"]]},"headers":[{"level":2,"title":"一、遇到的问题","slug":"一、遇到的问题","link":"#一、遇到的问题","children":[]},{"level":2,"title":"二、解决方法：","slug":"二、解决方法","link":"#二、解决方法","children":[]},{"level":2,"title":"三、附件","slug":"三、附件","link":"#三、附件","children":[]}],"readingTime":{"minutes":1.84,"words":552},"filePathRelative":"questionskills/workquestions/Oracle之ORA-29275-部分多字节字符.md","localizedDate":"2023年12月2日","excerpt":"","autoDesc":true}');export{d as comp,o as data};
